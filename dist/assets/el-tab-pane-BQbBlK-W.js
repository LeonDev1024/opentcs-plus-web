import{av as ge,aw as _e,ax as Ne,ak as K,ay as oe,al as Y,am as re,d as M,az as Z,aA as ee,an as U,r as T,k as L,aB as Q,aC as Ce,c as ie,o as ce,a7 as Te,a4 as ue,e as O,h as ae,aD as A,n as te,aE as Pe,aF as we,N as V,b as de,aG as Ee,m as d,S as D,aH as Se,aI as $e,aJ as z,aK as xe,aL as Be,ap as ke,aq as X,aM as Oe,aN as se,aO as be,aP as Re,aQ as ze,aR as ne,ag as Ae,Z as Fe,w as Le,x as Me,a6 as Ve,ar as Ie,aS as De}from"./index-B9WM9B43.js";const Ke=(e,l,b)=>_e(e.subTree).filter(s=>{var u;return Ne(s)&&((u=s.type)==null?void 0:u.name)===l&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ue=(e,l)=>{const b={},v=ge([]);return{children:v,addChild:u=>{b[u.uid]=u,v.value=Ke(e,l,b)},removeChild:u=>{delete b[u],v.value=v.value.filter(f=>f.uid!==u)}}},q=Symbol("tabsRootContextKey"),qe=K({tabs:{type:Y(Array),default:()=>oe([])}}),ve="ElTabBar",He=M({name:ve}),We=M({...He,props:qe,setup(e,{expose:l}){const b=e,v=ae(),a=Z(q);a||ee(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=U("tabs"),u=T(),f=T(),y=()=>{let o=0,g=0;const m=["top","bottom"].includes(a.props.tabPosition)?"width":"height",k=m==="width"?"x":"y",n=k==="x"?"left":"top";return b.tabs.every(S=>{var P,x;const N=(x=(P=v.parent)==null?void 0:P.refs)==null?void 0:x[`tab-${S.uid}`];if(!N)return!1;if(!S.active)return!0;o=N[`offset${A(n)}`],g=N[`client${A(m)}`];const $=window.getComputedStyle(N);return m==="width"&&(g-=Number.parseFloat($.paddingLeft)+Number.parseFloat($.paddingRight),o+=Number.parseFloat($.paddingLeft)),!1}),{[m]:`${g}px`,transform:`translate${A(k)}(${o}px)`}},C=()=>f.value=y(),_=[],i=()=>{var o;_.forEach(m=>m.stop()),_.length=0;const g=(o=v.parent)==null?void 0:o.refs;if(g){for(const m in g)if(m.startsWith("tab-")){const k=g[m];k&&_.push(Q(k,C))}}};L(()=>b.tabs,async()=>{await te(),C(),i()},{immediate:!0});const p=Q(u,()=>C());return Ce(()=>{_.forEach(o=>o.stop()),_.length=0,p.stop()}),l({ref:u,update:C}),(o,g)=>(ce(),ie("div",{ref_key:"barRef",ref:u,class:ue([O(s).e("active-bar"),O(s).is(O(a).props.tabPosition)]),style:Te(f.value)},null,6))}});var je=re(We,[["__file","tab-bar.vue"]]);const Ge=K({panes:{type:Y(Array),default:()=>oe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Je={tabClick:(e,l,b)=>b instanceof Event,tabRemove:(e,l)=>l instanceof Event},le="ElTabNav",Qe=M({name:le,props:Ge,emits:Je,setup(e,{expose:l,emit:b}){const v=Z(q);v||ee(le,"<el-tabs><tab-nav /></el-tabs>");const a=U("tabs"),s=Pe(),u=we(),f=T(),y=T(),C=T(),_=T(),i=T(!1),p=T(0),o=T(!1),g=T(!0),m=V(()=>["top","bottom"].includes(v.props.tabPosition)?"width":"height"),k=V(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${p.value}px)`})),n=()=>{if(!f.value)return;const r=f.value[`offset${A(m.value)}`],c=p.value;if(!c)return;const t=c>r?c-r:0;p.value=t},S=()=>{if(!f.value||!y.value)return;const r=y.value[`offset${A(m.value)}`],c=f.value[`offset${A(m.value)}`],t=p.value;if(r-t<=c)return;const w=r-t>c*2?t+c:r-c;p.value=w},P=async()=>{const r=y.value;if(!i.value||!C.value||!f.value||!r)return;await te();const c=C.value.querySelector(".is-active");if(!c)return;const t=f.value,w=["top","bottom"].includes(v.props.tabPosition),h=c.getBoundingClientRect(),E=t.getBoundingClientRect(),I=w?r.offsetWidth-E.width:r.offsetHeight-E.height,R=p.value;let B=R;w?(h.left<E.left&&(B=R-(E.left-h.left)),h.right>E.right&&(B=R+h.right-E.right)):(h.top<E.top&&(B=R-(E.top-h.top)),h.bottom>E.bottom&&(B=R+(h.bottom-E.bottom))),B=Math.max(B,0),p.value=Math.min(B,I)},x=()=>{var r;if(!y.value||!f.value)return;e.stretch&&((r=_.value)==null||r.update());const c=y.value[`offset${A(m.value)}`],t=f.value[`offset${A(m.value)}`],w=p.value;t<c?(i.value=i.value||{},i.value.prev=w,i.value.next=w+t<c,c-w<t&&(p.value=c-t)):(i.value=!1,w>0&&(p.value=0))},N=r=>{let c=0;switch(r.code){case z.left:case z.up:c=-1;break;case z.right:case z.down:c=1;break;default:return}const t=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let h=t.indexOf(r.target)+c;h<0?h=t.length-1:h>=t.length&&(h=0),t[h].focus({preventScroll:!0}),t[h].click(),$()},$=()=>{g.value&&(o.value=!0)},H=()=>o.value=!1;return L(s,r=>{r==="hidden"?g.value=!1:r==="visible"&&setTimeout(()=>g.value=!0,50)}),L(u,r=>{r?setTimeout(()=>g.value=!0,50):g.value=!1}),Q(C,x),de(()=>setTimeout(()=>P(),0)),Ee(()=>x()),l({scrollToActiveTab:P,removeFocus:H}),()=>{const r=i.value?[d("span",{class:[a.e("nav-prev"),a.is("disabled",!i.value.prev)],onClick:n},[d(D,null,{default:()=>[d(Se,null,null)]})]),d("span",{class:[a.e("nav-next"),a.is("disabled",!i.value.next)],onClick:S},[d(D,null,{default:()=>[d($e,null,null)]})])]:null,c=e.panes.map((t,w)=>{var h,E,I,R;const B=t.uid,W=t.props.disabled,j=(E=(h=t.props.name)!=null?h:t.index)!=null?E:`${w}`,G=!W&&(t.isClosable||e.editable);t.index=`${w}`;const me=G?d(D,{class:"is-icon-close",onClick:F=>b("tabRemove",t,F)},{default:()=>[d(xe,null,null)]}):null,he=((R=(I=t.slots).label)==null?void 0:R.call(I))||t.props.label,ye=!W&&t.active?0:-1;return d("div",{ref:`tab-${B}`,class:[a.e("item"),a.is(v.props.tabPosition),a.is("active",t.active),a.is("disabled",W),a.is("closable",G),a.is("focus",o.value)],id:`tab-${j}`,key:`tab-${B}`,"aria-controls":`pane-${j}`,role:"tab","aria-selected":t.active,tabindex:ye,onFocus:()=>$(),onBlur:()=>H(),onClick:F=>{H(),b("tabClick",t,j,F)},onKeydown:F=>{G&&(F.code===z.delete||F.code===z.backspace)&&b("tabRemove",t,F)}},[he,me])});return d("div",{ref:C,class:[a.e("nav-wrap"),a.is("scrollable",!!i.value),a.is(v.props.tabPosition)]},[r,d("div",{class:a.e("nav-scroll"),ref:f},[d("div",{class:[a.e("nav"),a.is(v.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(v.props.tabPosition))],ref:y,style:k.value,role:"tablist",onKeydown:N},[e.type?null:d(je,{ref:_,tabs:[...e.panes]},null),c])])])}}}),Xe=K({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Y(Function),default:()=>!0},stretch:Boolean}),J=e=>Be(e)||ke(e),Ye={[be]:e=>J(e),tabClick:(e,l)=>l instanceof Event,tabChange:e=>J(e),edit:(e,l)=>["remove","add"].includes(l),tabRemove:e=>J(e),tabAdd:()=>!0},Ze=M({name:"ElTabs",props:Xe,emits:Ye,setup(e,{emit:l,slots:b,expose:v}){var a;const s=U("tabs"),u=V(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:y,removeChild:C}=Ue(ae(),"ElTabPane"),_=T(),i=T((a=e.modelValue)!=null?a:"0"),p=async(n,S=!1)=>{var P,x;if(!(i.value===n||se(n)))try{let N;if(e.beforeLeave){const $=e.beforeLeave(n,i.value);N=$ instanceof Promise?await $:$}else N=!0;N!==!1&&(i.value=n,S&&(l(be,n),l("tabChange",n)),(x=(P=_.value)==null?void 0:P.removeFocus)==null||x.call(P))}catch{}},o=(n,S,P)=>{n.props.disabled||(l("tabClick",n,P),p(S,!0))},g=(n,S)=>{n.props.disabled||se(n.props.name)||(S.stopPropagation(),l("edit",n.props.name,"remove"),l("tabRemove",n.props.name))},m=()=>{l("edit",void 0,"add"),l("tabAdd")};L(()=>e.modelValue,n=>p(n)),L(i,async()=>{var n;await te(),(n=_.value)==null||n.scrollToActiveTab()}),Re(q,{props:e,currentName:i,registerPane:n=>{f.value.push(n)},sortPane:y,unregisterPane:C}),v({currentName:i});const k=({render:n})=>n();return()=>{const n=b["add-icon"],S=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:N=>{[z.enter,z.numpadEnter].includes(N.code)&&m()}},[n?X(b,"add-icon"):d(D,{class:s.is("icon-plus")},{default:()=>[d(Oe,null,null)]})]):null,P=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(k,{render:()=>{const N=f.value.some($=>$.slots.label);return d(Qe,{ref:_,currentName:i.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:o,onTabRemove:g},{$stable:!N})}},null),S]),x=d("div",{class:s.e("content")},[X(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[x,P])}}});var ea=Ze;const aa=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",ta=M({name:fe}),sa=M({...ta,props:aa,setup(e){const l=e,b=ae(),v=ze(),a=Z(q);a||ee(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=U("tab-pane"),u=T(),f=V(()=>l.closable||a.props.closable),y=ne(()=>{var o;return a.currentName.value===((o=l.name)!=null?o:u.value)}),C=T(y.value),_=V(()=>{var o;return(o=l.name)!=null?o:u.value}),i=ne(()=>!l.lazy||C.value||y.value);L(y,o=>{o&&(C.value=!0)});const p=Ae({uid:b.uid,slots:v,props:l,paneName:_,active:y,index:u,isClosable:f});return a.registerPane(p),de(()=>{a.sortPane(p)}),Fe(()=>{a.unregisterPane(p.uid)}),(o,g)=>O(i)?Le((ce(),ie("div",{key:0,id:`pane-${O(_)}`,class:ue(O(s).b()),role:"tabpanel","aria-hidden":!O(y),"aria-labelledby":`tab-${O(_)}`},[X(o.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ve,O(y)]]):Me("v-if",!0)}});var pe=re(sa,[["__file","tab-pane.vue"]]);const la=Ie(ea,{TabPane:pe}),oa=De(pe);export{la as E,oa as a};
