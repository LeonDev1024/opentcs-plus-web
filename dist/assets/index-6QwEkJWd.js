import{a9 as E,d as W,h as fe,r as c,ag as M,ab as _e,b as be,ah as ge,c as ye,o as b,m as l,q as a,w as g,p as Y,e as t,C as Ve,D as $,z as he,B as we,H as Ee,G as r,a6 as J,ai as Ie,t as y,x as ke,R as Ce,$ as Te,v as Ue,Y as Pe,aj as De}from"./index-B9WM9B43.js";/* empty css                  *//* empty css                       */import{a as Se,E as Ne}from"./el-radio-Cy5OMmSA.js";import{E as Re}from"./el-card-C9-IEzMj.js";import{_ as Fe}from"./index-F9iJ6oEr.js";import{E as Le,a as $e}from"./el-table-column-CfNB-tiT.js";import"./el-checkbox-CIZQMxKL.js";import{E as qe}from"./el-row-CZ85bKL9.js";import{_ as xe}from"./index-CfXeGV0Q.js";import{E as Be}from"./el-col-DjEila-N.js";import{a as ze,E as Ke}from"./el-form-item-C52vg3Rn.js";import{E as Ae}from"./el-input-number-CWw6lCGD.js";import"./_initCloneObject-CtNQcUp4.js";import"./el-tree-FBGJd7y4.js";import"./_baseClone-DI-sfL8c.js";import"./index-C6vhygJv.js";const Qe=m=>E({url:"/vehicle/list",method:"get",params:m}),je=m=>E({url:"/vehicle/"+m,method:"get"}),Ge=m=>E({url:"/opentcs/vehicle",method:"post",data:m}),Oe=m=>E({url:"/vehicle/edit",method:"put",data:m}),He=m=>E({url:"/opentcs/vehicle/"+m,method:"delete"}),Me={class:"p-2"},Ye={class:"search"},Je={class:"dialog-footer"},We=W({name:"Vehicle"}),fl=W({...We,setup(m){const{proxy:u}=fe(),q=c([]),I=c(!1),k=c(!0),C=c(!0),T=c([]),x=c(!0),B=c(!0),U=c(0),z=c(),P=c(),v=M({visible:!1,title:""}),K={id:void 0,name:void 0,code:void 0,vehicleTypeId:void 0,licensePlate:void 0,status:"0",currentLocationId:void 0,description:void 0},X=M({form:{...K},queryParams:{pageNum:1,pageSize:10,name:void 0,code:void 0,vehicleTypeId:null,licensePlate:void 0,status:void 0},rules:{name:[{required:!0,message:"车辆名称不能为空",trigger:"blur"}]}}),{queryParams:s,form:i,rules:Z}=_e(X),V=async()=>{k.value=!0;const n=await Qe(s.value);q.value=n.rows,U.value=n.total,k.value=!1},ee=()=>{D(),v.visible=!1},D=()=>{var n;i.value={...K},(n=P.value)==null||n.resetFields()},h=()=>{s.value.pageNum=1,V()},le=()=>{var n;(n=z.value)==null||n.resetFields(),h()},te=n=>{T.value=n.map(e=>e.id),x.value=n.length!=1,B.value=!n.length},ae=()=>{D(),v.visible=!0,v.title="添加车辆"},A=async n=>{D();const e=(n==null?void 0:n.id)||T.value[0],f=await je(e);Object.assign(i.value,f.data),v.visible=!0,v.title="修改车辆"},oe=()=>{var n;(n=P.value)==null||n.validate(async e=>{e&&(I.value=!0,i.value.id?await Oe(i.value).finally(()=>I.value=!1):await Ge(i.value).finally(()=>I.value=!1),u==null||u.$modal.msgSuccess("操作成功"),v.visible=!1,await V())})},Q=async n=>{const e=(n==null?void 0:n.id)||T.value;await(u==null?void 0:u.$modal.confirm('是否确认删除车辆编号为"'+e+'"的数据项？').finally(()=>k.value=!1)),await He(e),u==null||u.$modal.msgSuccess("删除成功"),await V()};return be(()=>{V()}),(n,e)=>{var O,H;const f=Ve,d=Ke,S=Ae,N=we,ne=he,_=Ee,j=ze,R=Be,ie=xe,se=qe,p=$e,F=Ce,G=Te,de=Le,re=Fe,ue=Re,L=Ne,pe=Se,me=De,w=ge("hasPermi"),ce=Ue;return b(),ye("div",Me,[l(Ie,{"enter-active-class":(O=t(u))==null?void 0:O.animate.searchAnimate.enter,"leave-active-class":(H=t(u))==null?void 0:H.animate.searchAnimate.leave},{default:a(()=>[g(Y("div",Ye,[l(j,{ref_key:"queryFormRef",ref:z,model:t(s),inline:!0,"label-width":"100px"},{default:a(()=>[l(d,{label:"车辆名称",prop:"name"},{default:a(()=>[l(f,{modelValue:t(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(s).name=o),placeholder:"请输入车辆名称",clearable:"",onKeyup:$(h,["enter"])},null,8,["modelValue"])]),_:1}),l(d,{label:"车辆编码",prop:"code"},{default:a(()=>[l(f,{modelValue:t(s).code,"onUpdate:modelValue":e[1]||(e[1]=o=>t(s).code=o),placeholder:"请输入车辆编码",clearable:"",onKeyup:$(h,["enter"])},null,8,["modelValue"])]),_:1}),l(d,{label:"车牌号",prop:"licensePlate"},{default:a(()=>[l(f,{modelValue:t(s).licensePlate,"onUpdate:modelValue":e[2]||(e[2]=o=>t(s).licensePlate=o),placeholder:"请输入车牌号",clearable:"",onKeyup:$(h,["enter"])},null,8,["modelValue"])]),_:1}),l(d,{label:"车辆类型",prop:"vehicleTypeId"},{default:a(()=>[l(S,{"model-value":typeof t(s).vehicleTypeId=="number"?t(s).vehicleTypeId:null,"onUpdate:modelValue":e[3]||(e[3]=o=>t(s).vehicleTypeId=o??void 0),placeholder:"请输入车辆类型ID",clearable:"",style:{width:"200px"}},null,8,["model-value"])]),_:1}),l(d,{label:"车辆状态",prop:"status"},{default:a(()=>[l(ne,{modelValue:t(s).status,"onUpdate:modelValue":e[4]||(e[4]=o=>t(s).status=o),placeholder:"车辆状态",clearable:""},{default:a(()=>[l(N,{label:"空闲",value:"0"}),l(N,{label:"工作中",value:"1"}),l(N,{label:"维护中",value:"2"})]),_:1},8,["modelValue"])]),_:1}),l(d,null,{default:a(()=>[l(_,{type:"primary",icon:"Search",onClick:h},{default:a(()=>e[18]||(e[18]=[r("搜索")])),_:1}),l(_,{icon:"Refresh",onClick:le},{default:a(()=>e[19]||(e[19]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model"])],512),[[J,t(C)]])]),_:1},8,["enter-active-class","leave-active-class"]),l(ue,{shadow:"never"},{header:a(()=>[l(se,{gutter:10,class:"mb8"},{default:a(()=>[l(R,{span:1.5},{default:a(()=>[g((b(),y(_,{type:"primary",plain:"",icon:"Plus",onClick:ae},{default:a(()=>e[20]||(e[20]=[r("新增")])),_:1})),[[w,["opentcs:vehicle:add"]]])]),_:1}),l(R,{span:1.5},{default:a(()=>[g((b(),y(_,{type:"success",plain:"",icon:"Edit",disabled:t(x),onClick:e[5]||(e[5]=o=>A())},{default:a(()=>e[21]||(e[21]=[r(" 修改 ")])),_:1},8,["disabled"])),[[w,["opentcs:vehicle:edit"]]])]),_:1}),l(R,{span:1.5},{default:a(()=>[g((b(),y(_,{type:"danger",plain:"",icon:"Delete",disabled:t(B),onClick:e[6]||(e[6]=o=>Q())},{default:a(()=>e[22]||(e[22]=[r(" 删除 ")])),_:1},8,["disabled"])),[[w,["opentcs:vehicle:remove"]]])]),_:1}),l(ie,{"show-search":t(C),"onUpdate:showSearch":e[7]||(e[7]=o=>Pe(C)?C.value=o:null),onQueryTable:V},null,8,["show-search"])]),_:1})]),default:a(()=>[g((b(),y(de,{data:t(q),border:"",onSelectionChange:te},{default:a(()=>[l(p,{type:"selection",width:"55",align:"center"}),l(p,{label:"id",align:"center",prop:"id"}),l(p,{label:"车辆名称",align:"center",prop:"name"}),l(p,{label:"车辆编码",align:"center",prop:"code"}),l(p,{label:"车牌号",align:"center",prop:"licensePlate"}),l(p,{label:"车辆类型",align:"center",prop:"vehicleTypeName"}),l(p,{label:"车辆状态",align:"center",prop:"status"},{default:a(o=>[o.row.status==="0"?(b(),y(F,{key:0,type:"success"},{default:a(()=>e[23]||(e[23]=[r("空闲")])),_:1})):o.row.status==="1"?(b(),y(F,{key:1,type:"warning"},{default:a(()=>e[24]||(e[24]=[r("工作中")])),_:1})):o.row.status==="2"?(b(),y(F,{key:2,type:"danger"},{default:a(()=>e[25]||(e[25]=[r("维护中")])),_:1})):ke("",!0)]),_:1}),l(p,{label:"当前位置",align:"center",prop:"currentLocationName"}),l(p,{label:"描述",align:"center",prop:"description","show-overflow-tooltip":""}),l(p,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),l(p,{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"150"},{default:a(o=>[l(G,{content:"修改",placement:"top"},{default:a(()=>[g(l(_,{link:"",type:"primary",icon:"Edit",onClick:ve=>A(o.row)},null,8,["onClick"]),[[w,["opentcs:vehicle:edit"]]])]),_:2},1024),l(G,{content:"删除",placement:"top"},{default:a(()=>[g(l(_,{link:"",type:"primary",icon:"Delete",onClick:ve=>Q(o.row)},null,8,["onClick"]),[[w,["opentcs:vehicle:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ce,t(k)]]),g(l(re,{page:t(s).pageNum,"onUpdate:page":e[8]||(e[8]=o=>t(s).pageNum=o),limit:t(s).pageSize,"onUpdate:limit":e[9]||(e[9]=o=>t(s).pageSize=o),total:t(U),onPagination:V},null,8,["page","limit","total"]),[[J,t(U)>0]])]),_:1}),l(me,{modelValue:t(v).visible,"onUpdate:modelValue":e[17]||(e[17]=o=>t(v).visible=o),title:t(v).title,width:"500px","append-to-body":""},{footer:a(()=>[Y("div",Je,[l(_,{loading:t(I),type:"primary",onClick:oe},{default:a(()=>e[29]||(e[29]=[r("确 定")])),_:1},8,["loading"]),l(_,{onClick:ee},{default:a(()=>e[30]||(e[30]=[r("取 消")])),_:1})])]),default:a(()=>[l(j,{ref_key:"vehicleFormRef",ref:P,model:t(i),rules:t(Z),"label-width":"100px"},{default:a(()=>[l(d,{label:"车辆名称",prop:"name"},{default:a(()=>[l(f,{modelValue:t(i).name,"onUpdate:modelValue":e[10]||(e[10]=o=>t(i).name=o),placeholder:"请输入车辆名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"车辆编码",prop:"code"},{default:a(()=>[l(f,{modelValue:t(i).code,"onUpdate:modelValue":e[11]||(e[11]=o=>t(i).code=o),placeholder:"请输入车辆编码"},null,8,["modelValue"])]),_:1}),l(d,{label:"车牌号",prop:"licensePlate"},{default:a(()=>[l(f,{modelValue:t(i).licensePlate,"onUpdate:modelValue":e[12]||(e[12]=o=>t(i).licensePlate=o),placeholder:"请输入车牌号"},null,8,["modelValue"])]),_:1}),l(d,{label:"车辆类型ID",prop:"vehicleTypeId"},{default:a(()=>[l(S,{"model-value":typeof t(i).vehicleTypeId=="number"?t(i).vehicleTypeId:null,"onUpdate:modelValue":e[13]||(e[13]=o=>t(i).vehicleTypeId=o),placeholder:"请输入车辆类型ID",style:{width:"100%"}},null,8,["model-value"])]),_:1}),l(d,{label:"车辆状态",prop:"status"},{default:a(()=>[l(pe,{modelValue:t(i).status,"onUpdate:modelValue":e[14]||(e[14]=o=>t(i).status=o)},{default:a(()=>[l(L,{value:"0"},{default:a(()=>e[26]||(e[26]=[r("空闲")])),_:1}),l(L,{value:"1"},{default:a(()=>e[27]||(e[27]=[r("工作中")])),_:1}),l(L,{value:"2"},{default:a(()=>e[28]||(e[28]=[r("维护中")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"当前位置ID",prop:"currentLocationId"},{default:a(()=>[l(S,{"model-value":typeof t(i).currentLocationId=="number"?t(i).currentLocationId:null,"onUpdate:modelValue":e[15]||(e[15]=o=>t(i).currentLocationId=o),placeholder:"请输入当前位置ID",style:{width:"100%"}},null,8,["model-value"])]),_:1}),l(d,{label:"描述",prop:"description"},{default:a(()=>[l(f,{modelValue:t(i).description,"onUpdate:modelValue":e[16]||(e[16]=o=>t(i).description=o),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{fl as default};
