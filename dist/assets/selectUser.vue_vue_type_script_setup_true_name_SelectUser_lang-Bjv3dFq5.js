import{d as I,h as A,ab as G,r as p,ag as H,t as C,o as S,q as t,m as o,aj as Y,Y as J,e as l,C as M,D as V,H as O,G as c,x as W,p as E,y as X}from"./index-B9WM9B43.js";/* empty css                  */import{E as Z}from"./el-row-CZ85bKL9.js";import{_ as ee}from"./index-F9iJ6oEr.js";import{E as oe,a as te}from"./el-table-column-CfNB-tiT.js";import"./el-checkbox-CIZQMxKL.js";import{_ as le}from"./index-vINeM9IP.js";import{a as ae,E as ne}from"./el-form-item-C52vg3Rn.js";import{u as se,d as re}from"./index-CcUUMJX9.js";const ue={class:"dialog-footer"},ie=I({name:"SelectUser"}),we=I({...ie,props:{roleId:{type:[Number,String],required:!0}},emits:["ok"],setup(h,{expose:R,emit:U}){const T=h,{proxy:r}=A(),{sys_normal_disable:q}=G(r==null?void 0:r.useDict("sys_normal_disable")),b=p([]),i=p(!1),_=p(0),v=p([]),n=H({pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0}),w=p(),y=p(),F=()=>{n.roleId=T.roleId,m(),i.value=!0},B=s=>{var e;(e=w.value)==null||e.toggleRowSelection(s,!1)},D=s=>{v.value=s.map(e=>e.userId)},m=async()=>{const s=await se(n);b.value=s.rows,_.value=s.total},f=()=>{n.pageNum=1,m()},x=()=>{var s;(s=y.value)==null||s.resetFields(),m()},z=U,K=async()=>{const s=n.roleId,e=v.value.join(",");if(e==""){r==null||r.$modal.msgError("请选择要分配的用户");return}await re({roleId:s,userIds:e}),r==null||r.$modal.msgSuccess("分配成功"),z("ok"),i.value=!1};return R({show:F}),(s,e)=>{const N=M,g=ne,d=O,L=ae,u=te,$=le,j=oe,P=ee,k=Z,Q=Y;return S(),C(k,null,{default:t(()=>[o(Q,{modelValue:l(i),"onUpdate:modelValue":e[5]||(e[5]=a=>J(i)?i.value=a:null),title:"选择用户",width:"800px",top:"5vh","append-to-body":""},{footer:t(()=>[E("div",ue,[o(d,{type:"primary",onClick:K},{default:t(()=>e[8]||(e[8]=[c("确 定")])),_:1}),o(d,{onClick:e[4]||(e[4]=a=>i.value=!1)},{default:t(()=>e[9]||(e[9]=[c("取 消")])),_:1})])]),default:t(()=>[o(L,{ref_key:"queryFormRef",ref:y,model:l(n),inline:!0},{default:t(()=>[o(g,{label:"用户名称",prop:"userName"},{default:t(()=>[o(N,{modelValue:l(n).userName,"onUpdate:modelValue":e[0]||(e[0]=a=>l(n).userName=a),placeholder:"请输入用户名称",clearable:"",onKeyup:V(f,["enter"])},null,8,["modelValue"])]),_:1}),o(g,{label:"手机号码",prop:"phonenumber"},{default:t(()=>[o(N,{modelValue:l(n).phonenumber,"onUpdate:modelValue":e[1]||(e[1]=a=>l(n).phonenumber=a),placeholder:"请输入手机号码",clearable:"",onKeyup:V(f,["enter"])},null,8,["modelValue"])]),_:1}),o(g,null,{default:t(()=>[o(d,{type:"primary",icon:"Search",onClick:f},{default:t(()=>e[6]||(e[6]=[c("搜索")])),_:1}),o(d,{icon:"Refresh",onClick:x},{default:t(()=>e[7]||(e[7]=[c("重置")])),_:1})]),_:1})]),_:1},8,["model"]),o(k,null,{default:t(()=>[o(j,{ref_key:"tableRef",ref:w,border:"",data:l(b),height:"260px",onRowClick:B,onSelectionChange:D},{default:t(()=>[o(u,{type:"selection",width:"55"}),o(u,{label:"用户名称",prop:"userName","show-overflow-tooltip":!0}),o(u,{label:"用户昵称",prop:"nickName","show-overflow-tooltip":!0}),o(u,{label:"邮箱",prop:"email","show-overflow-tooltip":!0}),o(u,{label:"手机",prop:"phonenumber","show-overflow-tooltip":!0}),o(u,{label:"状态",align:"center",prop:"status"},{default:t(a=>[o($,{options:l(q),value:a.row.status},null,8,["options","value"])]),_:1}),o(u,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:t(a=>[E("span",null,X(l(r).parseTime(a.row.createTime)),1)]),_:1})]),_:1},8,["data"]),l(_)>0?(S(),C(P,{key:0,page:l(n).pageNum,"onUpdate:page":e[2]||(e[2]=a=>l(n).pageNum=a),limit:l(n).pageSize,"onUpdate:limit":e[3]||(e[3]=a=>l(n).pageSize=a),total:l(_),onPagination:m},null,8,["page","limit","total"])):W("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{we as _};
