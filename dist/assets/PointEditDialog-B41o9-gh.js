import{d as H,r as f,N,k as q,t as b,o as g,q as u,x as D,m as o,C as I,z as S,B as F,aZ as M,H as R,G as k,aj as X,E as Y,M as Z}from"./index-B9WM9B43.js";/* empty css                  */import{a as j,E as G}from"./el-form-item-C52vg3Rn.js";import{E as O}from"./el-input-number-CWw6lCGD.js";import{u as T}from"./mapEditor-C3208Y0J.js";import"./_baseClone-DI-sfL8c.js";import"./_initCloneObject-CtNQcUp4.js";import"./index-C6vhygJv.js";import"./index-BJgmA4Qg.js";const A=H({__name:"PointEditDialog",props:{modelValue:{type:Boolean},point:{}},emits:["update:modelValue","updated"],setup(x,{emit:C}){const d=x,i=C,E=T(),s=f(),m=f(!1),V=N({get:()=>d.modelValue,set:t=>i("update:modelValue",t)}),e=f({name:"",code:"",type:"Halt point",x:0,y:0,z:void 0,status:"0",radius:10,color:"#1890ff",strokeColor:void 0,description:""}),U={name:[{required:!0,message:"请输入名称",trigger:"blur"}],x:[{required:!0,message:"请输入X坐标",trigger:"blur"}],y:[{required:!0,message:"请输入Y坐标",trigger:"blur"}]};q(()=>d.point,t=>{t&&(e.value={name:t.name||"",code:t.code||"",type:t.type||"Halt point",x:t.x,y:t.y,z:t.z,status:t.status||"0",radius:t.editorProps.radius||10,color:t.editorProps.color||"#1890ff",strokeColor:t.editorProps.strokeColor,description:t.description||""})},{immediate:!0});const v=()=>{var t;(t=s.value)==null||t.resetFields(),i("update:modelValue",!1)},w=async()=>{if(d.point&&s.value)try{await s.value.validate(),m.value=!0,E.updatePoint(d.point.id,{name:e.value.name,code:e.value.code||void 0,type:e.value.type,x:e.value.x,y:e.value.y,z:e.value.z,status:e.value.status,description:e.value.description||void 0,editorProps:{...d.point.editorProps,radius:e.value.radius,color:e.value.color,strokeColor:e.value.strokeColor||void 0}}),Y.success("保存成功"),i("updated"),v()}catch(t){console.error("保存失败:",t)}finally{m.value=!1}};return(t,l)=>{const n=I,r=G,c=F,P=S,p=O,y=M,z=j,_=R,B=X;return g(),b(B,{modelValue:V.value,"onUpdate:modelValue":l[11]||(l[11]=a=>V.value=a),title:"编辑点属性",width:"600px","close-on-click-modal":!1,onClose:v},{footer:u(()=>[o(_,{onClick:v},{default:u(()=>l[12]||(l[12]=[k("取消")])),_:1}),o(_,{type:"primary",onClick:w,loading:m.value},{default:u(()=>l[13]||(l[13]=[k("保存")])),_:1},8,["loading"])]),default:u(()=>[t.point?(g(),b(z,{key:0,ref_key:"formRef",ref:s,model:e.value,rules:U,"label-width":"100px","label-position":"right"},{default:u(()=>[o(r,{label:"名称",prop:"name"},{default:u(()=>[o(n,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.name=a),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(r,{label:"编码",prop:"code"},{default:u(()=>[o(n,{modelValue:e.value.code,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.code=a),placeholder:"请输入编码"},null,8,["modelValue"])]),_:1}),o(r,{label:"类型",prop:"type"},{default:u(()=>[o(P,{modelValue:e.value.type,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.type=a),placeholder:"请选择类型",style:{width:"100%"}},{default:u(()=>[o(c,{label:"临时停车 (Halt point)",value:"Halt point"}),o(c,{label:"长时间停车 (Park point)",value:"Park point"})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"X坐标",prop:"x"},{default:u(()=>[o(p,{modelValue:e.value.x,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.x=a),precision:1,step:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(r,{label:"Y坐标",prop:"y"},{default:u(()=>[o(p,{modelValue:e.value.y,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.y=a),precision:1,step:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(r,{label:"Z坐标",prop:"z"},{default:u(()=>[o(p,{modelValue:e.value.z,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.z=a),precision:1,step:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(r,{label:"状态",prop:"status"},{default:u(()=>[o(n,{modelValue:e.value.status,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.status=a),placeholder:"请输入状态"},null,8,["modelValue"])]),_:1}),o(r,{label:"半径",prop:"radius"},{default:u(()=>[o(p,{modelValue:e.value.radius,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.radius=a),min:1,max:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(r,{label:"颜色",prop:"color"},{default:u(()=>[o(y,{modelValue:e.value.color,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.color=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"描边颜色",prop:"strokeColor"},{default:u(()=>[o(y,{modelValue:e.value.strokeColor,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.strokeColor=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"描述",prop:"description"},{default:u(()=>[o(n,{modelValue:e.value.description,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value.description=a),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):D("",!0)]),_:1},8,["modelValue"])}}}),oe=Z(A,[["__scopeId","data-v-e1f02207"]]);export{oe as default};
