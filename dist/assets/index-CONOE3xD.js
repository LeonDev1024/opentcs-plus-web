import{d as S,h as K,ab as R,r as p,b as U,ah as x,c as P,o as N,p as g,m as e,q as n,e as o,C as Q,D as E,H as G,G as k,w,t as H,y as C,$ as J,v as M,a6 as O,J as j}from"./index-B9WM9B43.js";import{_ as A}from"./index-F9iJ6oEr.js";import{E as W,a as X}from"./el-table-column-CfNB-tiT.js";import"./el-checkbox-CIZQMxKL.js";import{_ as Y}from"./index-vINeM9IP.js";import{E as Z}from"./el-card-C9-IEzMj.js";import{a as ee,E as oe}from"./el-form-item-C52vg3Rn.js";import{l as te,f as le}from"./index-BQi1jQFn.js";import"./_initCloneObject-CtNQcUp4.js";import"./_baseClone-DI-sfL8c.js";const ae={class:"p-2"},ne={class:"mb-[10px]"},re=S({name:"Online"}),be=S({...re,setup(se){const{proxy:s}=K(),{sys_device_type:V}=R(s==null?void 0:s.useDict("sys_device_type")),v=p([]),m=p(!0),d=p(0),b=p(),t=p({pageNum:1,pageSize:10,ipaddr:"",userName:""}),c=async()=>{m.value=!0;const i=await te(t.value);v.value=i.rows,d.value=i.total,m.value=!1},u=()=>{t.value.pageNum=1,c()},T=()=>{var i;(i=b.value)==null||i.resetFields(),u()},L=async i=>{const[a]=await j(s==null?void 0:s.$modal.confirm('是否确认强退名称为"'+i.userName+'"的用户?'));a||(await le(i.tokenId),await c(),s==null||s.$modal.msgSuccess("删除成功"))};return U(()=>{c()}),(i,a)=>{const h=Q,_=oe,f=G,z=ee,y=Z,r=X,D=Y,F=J,B=W,I=A,$=x("hasPermi"),q=M;return N(),P("div",ae,[g("div",ne,[e(y,{shadow:"hover"},{default:n(()=>[e(z,{ref_key:"queryFormRef",ref:b,model:o(t),inline:!0},{default:n(()=>[e(_,{label:"登录地址",prop:"ipaddr"},{default:n(()=>[e(h,{modelValue:o(t).ipaddr,"onUpdate:modelValue":a[0]||(a[0]=l=>o(t).ipaddr=l),placeholder:"请输入登录地址",clearable:"",onKeyup:E(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"用户名称",prop:"userName"},{default:n(()=>[e(h,{modelValue:o(t).userName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(t).userName=l),placeholder:"请输入用户名称",clearable:"",onKeyup:E(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:n(()=>[e(f,{type:"primary",icon:"Search",onClick:u},{default:n(()=>a[4]||(a[4]=[k("搜索")])),_:1}),e(f,{icon:"Refresh",onClick:T},{default:n(()=>a[5]||(a[5]=[k("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),e(y,{shadow:"hover"},{default:n(()=>[w((N(),H(B,{border:"",data:o(v).slice((o(t).pageNum-1)*o(t).pageSize,o(t).pageNum*o(t).pageSize),style:{width:"100%"}},{default:n(()=>[e(r,{label:"序号",width:"50",type:"index",align:"center"},{default:n(l=>[g("span",null,C((o(t).pageNum-1)*o(t).pageSize+l.$index+1),1)]),_:1}),e(r,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),e(r,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),e(r,{label:"客户端",align:"center",prop:"clientKey","show-overflow-tooltip":!0}),e(r,{label:"设备类型",align:"center"},{default:n(l=>[e(D,{options:o(V),value:l.row.deviceType},null,8,["options","value"])]),_:1}),e(r,{label:"所属部门",align:"center",prop:"deptName","show-overflow-tooltip":!0}),e(r,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(r,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(r,{label:"操作系统",align:"center",prop:"os","show-overflow-tooltip":!0}),e(r,{label:"浏览器",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(r,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:n(l=>[g("span",null,C(o(s).parseTime(l.row.loginTime)),1)]),_:1}),e(r,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[e(F,{content:"强退",placement:"top"},{default:n(()=>[w(e(f,{link:"",type:"primary",icon:"Delete",onClick:ie=>L(l.row)},null,8,["onClick"]),[[$,["monitor:online:forceLogout"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[q,o(m)]]),w(e(I,{page:o(t).pageNum,"onUpdate:page":a[2]||(a[2]=l=>o(t).pageNum=l),limit:o(t).pageSize,"onUpdate:limit":a[3]||(a[3]=l=>o(t).pageSize=l),total:o(d)},null,8,["page","limit","total"]),[[O,o(d)>0]])]),_:1})])}}});export{be as default};
