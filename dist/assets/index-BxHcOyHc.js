import{a9 as C,d as re,h as be,r as f,ag as ee,ab as Ve,b as Oe,ah as Te,c as u,o as s,m as e,q as a,w as V,p as k,e as r,C as Le,D as xe,H as Re,G as p,a6 as le,ai as Pe,t as R,y as O,x as te,F as ae,A as oe,R as Ee,$ as ke,v as Ce,Y as Ne,Q as Se,z as Ae,B as Fe,aj as Ue,M as De}from"./index-B9WM9B43.js";/* empty css                  */import{E as Ie}from"./el-input-number-CWw6lCGD.js";import{E as qe}from"./el-card-C9-IEzMj.js";import{_ as $e}from"./index-F9iJ6oEr.js";import{E as Ge,a as He}from"./el-table-column-CfNB-tiT.js";import"./el-checkbox-CIZQMxKL.js";import{E as ze}from"./el-row-CZ85bKL9.js";import{_ as Be}from"./index-CfXeGV0Q.js";import{E as Je}from"./el-col-DjEila-N.js";import{a as Ye,E as Ke}from"./el-form-item-C52vg3Rn.js";import"./index-C6vhygJv.js";import"./_initCloneObject-CtNQcUp4.js";import"./el-tree-FBGJd7y4.js";import"./_baseClone-DI-sfL8c.js";const Me=v=>C({url:"/vehicle/type/list",method:"get",params:v}),Qe=v=>C({url:"/vehicle/type/"+v,method:"get"}),je=v=>C({url:"/vehicle/type/add",method:"post",data:v}),We=v=>C({url:"/vehicle/type/edit",method:"put",data:v}),Xe=v=>C({url:"/vehicle/type/"+v,method:"delete"}),Ze={class:"p-2"},el={class:"search"},ll={key:0},tl={key:1,style:{color:"#909399"}},al={key:0},ol={key:1,style:{color:"#909399"}},rl={key:0},il={key:1,style:{color:"#909399"}},nl={key:0},sl={key:1,style:{color:"#909399"}},dl={key:0,style:{color:"#909399"}},ul={key:0,style:{color:"#909399"}},pl={class:"dialog-footer"},ml=re({name:"Type"}),vl=re({...ml,setup(v){const{proxy:d}=be(),H=f([]),N=f(!1),S=f(!0),A=f(!0),U=f([]),z=f(!0),B=f(!0),D=f(0),J=f(),I=f(),_=ee({visible:!1,title:""}),ie=n=>!n||!Array.isArray(n)?[]:n.filter(l=>l),ne=n=>!n||!Array.isArray(n)?[]:n.filter(l=>l),m={id:void 0,name:void 0,length:null,width:null,height:null,maxVelocity:null,maxReverseVelocity:null,energyLevel:null,allowedOrders:void 0,allowedPeripheralOperations:void 0,properties:void 0,allowedOrdersList:[],allowedPeripheralOperationsList:[],propertiesText:""},se=ee({form:{...m},queryParams:{pageNum:1,pageSize:10,name:void 0},rules:{name:[{required:!0,message:"车辆类型名称不能为空",trigger:"blur"}],length:[{required:!0,message:"长度不能为空",trigger:"blur"},{type:"number",message:"长度必须为数字",trigger:"blur"}],width:[{required:!0,message:"宽度不能为空",trigger:"blur"},{type:"number",message:"宽度必须为数字",trigger:"blur"}],height:[{required:!0,message:"高度不能为空",trigger:"blur"},{type:"number",message:"高度必须为数字",trigger:"blur"}],maxVelocity:[{required:!0,message:"最大速度不能为空",trigger:"blur"},{type:"number",message:"最大速度必须为数字",trigger:"blur"}]}}),{queryParams:h,form:t,rules:de}=Ve(se),T=async()=>{S.value=!0;const n=await Me(h.value);H.value=n.rows,D.value=n.total,S.value=!1},ue=()=>{q(),_.visible=!1},q=()=>{var n;t.value.id=m.id,t.value.name=m.name,t.value.length=m.length,t.value.width=m.width,t.value.height=m.height,t.value.maxVelocity=m.maxVelocity,t.value.maxReverseVelocity=m.maxReverseVelocity,t.value.energyLevel=m.energyLevel,t.value.allowedOrders=m.allowedOrders,t.value.allowedPeripheralOperations=m.allowedPeripheralOperations,t.value.properties=m.properties,t.value.allowedOrdersList=[],t.value.allowedPeripheralOperationsList=[],t.value.propertiesText="",(n=I.value)==null||n.resetFields()},$=()=>{h.value.pageNum=1,T()},pe=()=>{var n;(n=J.value)==null||n.resetFields(),$()},me=n=>{U.value=n.map(l=>l.id),z.value=n.length!=1,B.value=!n.length},ve=()=>{q(),_.visible=!0,_.title="添加车辆类型"},Y=async n=>{q();const l=(n==null?void 0:n.id)||U.value[0],i=(await Qe(l)).data;t.value.id=i.id,t.value.name=i.name,t.value.length=i.length,t.value.width=i.width,t.value.height=i.height,t.value.maxVelocity=i.maxVelocity,t.value.maxReverseVelocity=i.maxReverseVelocity,t.value.energyLevel=i.energyLevel,t.value.allowedOrdersList=i.allowedOrders&&Array.isArray(i.allowedOrders)?[...i.allowedOrders]:[],t.value.allowedPeripheralOperationsList=i.allowedPeripheralOperations&&Array.isArray(i.allowedPeripheralOperations)?[...i.allowedPeripheralOperations]:[],i.properties&&typeof i.properties=="object"?t.value.propertiesText=JSON.stringify(i.properties,null,2):t.value.propertiesText="",_.visible=!0,_.title="修改车辆类型"},ge=()=>{var n;(n=I.value)==null||n.validate(async l=>{if(l){N.value=!0;const b={id:t.value.id,name:t.value.name,length:t.value.length??void 0,width:t.value.width??void 0,height:t.value.height??void 0,maxVelocity:t.value.maxVelocity??void 0,maxReverseVelocity:t.value.maxReverseVelocity??void 0,energyLevel:t.value.energyLevel??void 0,allowedOrders:t.value.allowedOrdersList&&t.value.allowedOrdersList.length>0?t.value.allowedOrdersList:void 0,allowedPeripheralOperations:t.value.allowedPeripheralOperationsList&&t.value.allowedPeripheralOperationsList.length>0?t.value.allowedPeripheralOperationsList:void 0};if(t.value.propertiesText&&t.value.propertiesText.trim())try{const i=JSON.parse(t.value.propertiesText);typeof i=="object"&&i!==null&&(b.properties=i)}catch{d==null||d.$modal.msgError("扩展属性JSON格式错误，请检查后重试"),N.value=!1;return}try{t.value.id?await We(b):await je(b),d==null||d.$modal.msgSuccess("操作成功"),_.visible=!1,await T()}finally{N.value=!1}}})},K=async n=>{const l=(n==null?void 0:n.id)||U.value;await(d==null?void 0:d.$modal.confirm('是否确认删除车辆类型编号为"'+l+'"的数据项？').finally(()=>S.value=!1)),await Xe(l),d==null||d.$modal.msgSuccess("删除成功"),await T()};return Oe(()=>{T()}),(n,l)=>{var X,Z;const b=Le,i=Ke,w=Re,M=Ye,g=Je,ce=Be,L=ze,c=He,Q=Ee,j=ke,ye=Ge,fe=$e,_e=qe,F=Se,x=Ie,y=Fe,W=Ae,he=Ue,P=Te("hasPermi"),we=Ce;return s(),u("div",Ze,[e(Pe,{"enter-active-class":(X=r(d))==null?void 0:X.animate.searchAnimate.enter,"leave-active-class":(Z=r(d))==null?void 0:Z.animate.searchAnimate.leave},{default:a(()=>[V(k("div",el,[e(M,{ref_key:"queryFormRef",ref:J,model:r(h),inline:!0,"label-width":"100px"},{default:a(()=>[e(i,{label:"车辆类型名称",prop:"name"},{default:a(()=>[e(b,{modelValue:r(h).name,"onUpdate:modelValue":l[0]||(l[0]=o=>r(h).name=o),placeholder:"请输入车辆类型名称",clearable:"",onKeyup:xe($,["enter"])},null,8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(w,{type:"primary",icon:"Search",onClick:$},{default:a(()=>l[17]||(l[17]=[p("搜索")])),_:1}),e(w,{icon:"Refresh",onClick:pe},{default:a(()=>l[18]||(l[18]=[p("重置")])),_:1})]),_:1})]),_:1},8,["model"])],512),[[le,r(A)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(_e,{shadow:"never"},{header:a(()=>[e(L,{gutter:10,class:"mb8"},{default:a(()=>[e(g,{span:1.5},{default:a(()=>[V((s(),R(w,{type:"primary",plain:"",icon:"Plus",onClick:ve},{default:a(()=>l[19]||(l[19]=[p("新增")])),_:1})),[[P,["opentcs:vehicleType:add"]]])]),_:1}),e(g,{span:1.5},{default:a(()=>[V((s(),R(w,{type:"success",plain:"",icon:"Edit",disabled:r(z),onClick:l[1]||(l[1]=o=>Y())},{default:a(()=>l[20]||(l[20]=[p(" 修改 ")])),_:1},8,["disabled"])),[[P,["opentcs:vehicleType:edit"]]])]),_:1}),e(g,{span:1.5},{default:a(()=>[V((s(),R(w,{type:"danger",plain:"",icon:"Delete",disabled:r(B),onClick:l[2]||(l[2]=o=>K())},{default:a(()=>l[21]||(l[21]=[p(" 删除 ")])),_:1},8,["disabled"])),[[P,["opentcs:vehicleType:remove"]]])]),_:1}),e(ce,{"show-search":r(A),"onUpdate:showSearch":l[3]||(l[3]=o=>Ne(A)?A.value=o:null),onQueryTable:T},null,8,["show-search"])]),_:1})]),default:a(()=>[V((s(),R(ye,{data:r(H),border:"",onSelectionChange:me},{default:a(()=>[e(c,{type:"selection",width:"55",align:"center"}),e(c,{label:"车辆类型名称",align:"center",prop:"name","min-width":"150"}),e(c,{label:"尺寸(长×宽×高)",align:"center","min-width":"150"},{default:a(o=>[o.row.length&&o.row.width&&o.row.height?(s(),u("span",ll,O(o.row.length)+"×"+O(o.row.width)+"×"+O(o.row.height)+"m ",1)):(s(),u("span",tl,"-"))]),_:1}),e(c,{label:"最大速度",align:"center",prop:"maxVelocity",width:"100"},{default:a(o=>[o.row.maxVelocity?(s(),u("span",al,O(o.row.maxVelocity)+" m/s",1)):(s(),u("span",ol,"-"))]),_:1}),e(c,{label:"最大倒车速度",align:"center",prop:"maxReverseVelocity",width:"120"},{default:a(o=>[o.row.maxReverseVelocity?(s(),u("span",rl,O(o.row.maxReverseVelocity)+" m/s",1)):(s(),u("span",il,"-"))]),_:1}),e(c,{label:"能量等级",align:"center",prop:"energyLevel",width:"100"},{default:a(o=>[o.row.energyLevel!==null&&o.row.energyLevel!==void 0?(s(),u("span",nl,O(o.row.energyLevel),1)):(s(),u("span",sl,"-"))]),_:1}),e(c,{label:"允许的订单类型",align:"center",prop:"allowedOrders","min-width":"150","show-overflow-tooltip":""},{default:a(o=>[(s(!0),u(ae,null,oe(ie(o.row.allowedOrders),(E,G)=>(s(),R(Q,{key:G,size:"small",style:{"margin-right":"4px"}},{default:a(()=>[p(O(E),1)]),_:2},1024))),128)),!o.row.allowedOrders||o.row.allowedOrders.length===0?(s(),u("span",dl,"-")):te("",!0)]),_:1}),e(c,{label:"允许的外设操作",align:"center",prop:"allowedPeripheralOperations","min-width":"150","show-overflow-tooltip":""},{default:a(o=>[(s(!0),u(ae,null,oe(ne(o.row.allowedPeripheralOperations),(E,G)=>(s(),R(Q,{key:G,size:"small",type:"info",style:{"margin-right":"4px"}},{default:a(()=>[p(O(E),1)]),_:2},1024))),128)),!o.row.allowedPeripheralOperations||o.row.allowedPeripheralOperations.length===0?(s(),u("span",ul,"-")):te("",!0)]),_:1}),e(c,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),e(c,{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"150"},{default:a(o=>[e(j,{content:"修改",placement:"top"},{default:a(()=>[V(e(w,{link:"",type:"primary",icon:"Edit",onClick:E=>Y(o.row)},null,8,["onClick"]),[[P,["opentcs:vehicleType:edit"]]])]),_:2},1024),e(j,{content:"删除",placement:"top"},{default:a(()=>[V(e(w,{link:"",type:"primary",icon:"Delete",onClick:E=>K(o.row)},null,8,["onClick"]),[[P,["opentcs:vehicleType:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[we,r(S)]]),V(e(fe,{page:r(h).pageNum,"onUpdate:page":l[4]||(l[4]=o=>r(h).pageNum=o),limit:r(h).pageSize,"onUpdate:limit":l[5]||(l[5]=o=>r(h).pageSize=o),total:r(D),onPagination:T},null,8,["page","limit","total"]),[[le,r(D)>0]])]),_:1}),e(he,{modelValue:r(_).visible,"onUpdate:modelValue":l[16]||(l[16]=o=>r(_).visible=o),title:r(_).title,width:"700px","append-to-body":""},{footer:a(()=>[k("div",pl,[e(w,{loading:r(N),type:"primary",onClick:ge},{default:a(()=>l[29]||(l[29]=[p("确 定")])),_:1},8,["loading"]),e(w,{onClick:ue},{default:a(()=>l[30]||(l[30]=[p("取 消")])),_:1})])]),default:a(()=>[e(M,{ref_key:"typeFormRef",ref:I,model:r(t),rules:r(de),"label-width":"140px"},{default:a(()=>[e(L,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(i,{label:"车辆类型名称",prop:"name"},{default:a(()=>[e(b,{modelValue:r(t).name,"onUpdate:modelValue":l[6]||(l[6]=o=>r(t).name=o),placeholder:"请输入车辆类型名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F,{"content-position":"left"},{default:a(()=>l[22]||(l[22]=[p("尺寸信息")])),_:1}),e(L,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(i,{label:"长度(m)",prop:"length"},{default:a(()=>[e(x,{modelValue:r(t).length,"onUpdate:modelValue":l[7]||(l[7]=o=>r(t).length=o),precision:4,step:.1,min:0,controls:!0,style:{width:"100%"},placeholder:"长度"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{span:12},{default:a(()=>[e(i,{label:"宽度(m)",prop:"width"},{default:a(()=>[e(x,{modelValue:r(t).width,"onUpdate:modelValue":l[8]||(l[8]=o=>r(t).width=o),precision:4,step:.1,min:0,controls:!0,style:{width:"100%"},placeholder:"宽度"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(L,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(i,{label:"高度(m)",prop:"height"},{default:a(()=>[e(x,{modelValue:r(t).height,"onUpdate:modelValue":l[9]||(l[9]=o=>r(t).height=o),precision:4,step:.1,min:0,controls:!0,style:{width:"100%"},placeholder:"高度"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F,{"content-position":"left"},{default:a(()=>l[23]||(l[23]=[p("速度信息")])),_:1}),e(L,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(i,{label:"最大速度(m/s)",prop:"maxVelocity"},{default:a(()=>[e(x,{modelValue:r(t).maxVelocity,"onUpdate:modelValue":l[10]||(l[10]=o=>r(t).maxVelocity=o),precision:4,step:.1,min:0,controls:!0,style:{width:"100%"},placeholder:"最大速度"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{span:12},{default:a(()=>[e(i,{label:"最大倒车速度(m/s)",prop:"maxReverseVelocity"},{default:a(()=>[e(x,{modelValue:r(t).maxReverseVelocity,"onUpdate:modelValue":l[11]||(l[11]=o=>r(t).maxReverseVelocity=o),precision:4,step:.1,min:0,controls:!0,style:{width:"100%"},placeholder:"最大倒车速度"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(L,{gutter:20},{default:a(()=>[e(g,{span:12},{default:a(()=>[e(i,{label:"能量等级",prop:"energyLevel"},{default:a(()=>[e(x,{modelValue:r(t).energyLevel,"onUpdate:modelValue":l[12]||(l[12]=o=>r(t).energyLevel=o),precision:4,step:.1,min:0,controls:!0,style:{width:"100%"},placeholder:"能量等级"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F,{"content-position":"left"},{default:a(()=>l[24]||(l[24]=[p("操作权限")])),_:1}),e(i,{label:"允许的订单类型",prop:"allowedOrders"},{default:a(()=>[e(W,{modelValue:r(t).allowedOrdersList,"onUpdate:modelValue":l[13]||(l[13]=o=>r(t).allowedOrdersList=o),multiple:"",placeholder:"请选择允许的订单类型",style:{width:"100%"}},{default:a(()=>[e(y,{label:"TRANSPORT",value:"TRANSPORT"}),e(y,{label:"CHARGE",value:"CHARGE"}),e(y,{label:"PARK",value:"PARK"}),e(y,{label:"MOVE",value:"MOVE"})]),_:1},8,["modelValue"]),l[25]||(l[25]=k("div",{class:"form-tip"},"选择该车辆类型支持的订单类型",-1))]),_:1}),e(i,{label:"允许的外设操作",prop:"allowedPeripheralOperations"},{default:a(()=>[e(W,{modelValue:r(t).allowedPeripheralOperationsList,"onUpdate:modelValue":l[14]||(l[14]=o=>r(t).allowedPeripheralOperationsList=o),multiple:"",placeholder:"请选择允许的外设操作",style:{width:"100%"}},{default:a(()=>[e(y,{label:"LIFT_UP",value:"LIFT_UP"}),e(y,{label:"LIFT_DOWN",value:"LIFT_DOWN"}),e(y,{label:"CONVEYOR_START",value:"CONVEYOR_START"}),e(y,{label:"CONVEYOR_STOP",value:"CONVEYOR_STOP"}),e(y,{label:"LIGHT_ON",value:"LIGHT_ON"}),e(y,{label:"LIGHT_OFF",value:"LIGHT_OFF"})]),_:1},8,["modelValue"]),l[26]||(l[26]=k("div",{class:"form-tip"},"选择该车辆类型支持的外设操作",-1))]),_:1}),e(F,{"content-position":"left"},{default:a(()=>l[27]||(l[27]=[p("扩展属性")])),_:1}),e(i,{label:"其他参数",prop:"properties"},{default:a(()=>[e(b,{modelValue:r(t).propertiesText,"onUpdate:modelValue":l[15]||(l[15]=o=>r(t).propertiesText=o),type:"textarea",rows:4,placeholder:'请输入JSON格式的其他参数，如：{"key": "value"}'},null,8,["modelValue"]),l[28]||(l[28]=k("div",{class:"form-tip"},"扩展属性，JSON格式字符串",-1))]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),El=De(vl,[["__scopeId","data-v-9ca2cdb1"]]);export{El as default};
