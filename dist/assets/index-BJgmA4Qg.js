import{a9 as e}from"./index-B9WM9B43.js";function d(t){return e({url:"/map/model/list",method:"get",params:t})}const l=t=>e({url:"/map/model/"+t,method:"get"}),m=t=>e({url:"/map/model/create",method:"post",data:t}),c=t=>e({url:"/map/model/update",method:"put",data:t}),i=t=>e({url:"/map/model/"+t,method:"delete"}),u=(t,o)=>{var n;const a=JSON.stringify(o,null,2),r=new FormData,s=new Blob([a],{type:"application/json"});return r.append("file",s,`map_${((n=o.mapInfo)==null?void 0:n.version)||"1.0"}.json`),e({url:`/map/model/${t}/editor-data/upload`,method:"post",data:r,headers:{"Content-Type":"multipart/form-data"}})},h=async t=>{try{const o=await e({url:"/map/editor/load",method:"post",data:{mapId:t},responseType:"blob"});if(!o||!(o instanceof Blob))throw new Error("响应数据格式错误");const a=await o.text();try{const r=JSON.parse(a);if(r.code&&r.code!==200)throw new Error(r.msg||"加载地图失败");return{data:r}}catch{throw console.warn("Blob 数据格式错误：",a),new Error("地图数据格式错误："+a.substring(0,100))}}catch(o){if(o instanceof Blob)try{const a=await o.text(),r=JSON.parse(a);throw new Error(r.msg||"加载地图失败")}catch{throw new Error("加载地图失败")}throw o}};export{d as a,m as b,i as d,l as g,h as l,u as s,c as u};
