import{d as J,h as ke,ab as M,r as p,ag as Q,b as Ce,ah as Ee,c as U,o as d,m as l,q as a,w as c,p as K,e as t,C as Te,D as j,z as he,F as G,A as O,t as y,B as De,Y as W,H as Ne,G as f,a6 as X,ai as Re,x as Se,y as Z,$ as Ue,v as Ke,aj as Fe,cW as Ie,cX as $e,cY as qe,cZ as Be,c_ as Pe,c$ as Ye}from"./index-B9WM9B43.js";/* empty css                  *//* empty css                       */import{a as xe,E as ze}from"./el-radio-Cy5OMmSA.js";import{_ as Ae}from"./index-F9iJ6oEr.js";import{E as Le,a as He}from"./el-table-column-CfNB-tiT.js";import"./el-checkbox-CIZQMxKL.js";import{_ as Me}from"./index-vINeM9IP.js";import{E as Qe}from"./el-row-CZ85bKL9.js";import{_ as je}from"./index-CfXeGV0Q.js";import{E as Ge}from"./el-col-DjEila-N.js";import{E as Oe}from"./el-card-C9-IEzMj.js";import{a as We,E as Xe}from"./el-form-item-C52vg3Rn.js";import{E as Ze}from"./el-date-picker-LQDrgT3l.js";import"./_initCloneObject-CtNQcUp4.js";import"./el-tree-FBGJd7y4.js";import"./_baseClone-DI-sfL8c.js";import"./index-C6vhygJv.js";const Je={class:"p-2"},el={class:"mb-[10px]"},ll={class:"dialog-footer"},ol=J({name:"Config"}),kl=J({...ol,setup(al){const{proxy:n}=ke(),{sys_yes_no:T}=M(n==null?void 0:n.useDict("sys_yes_no")),F=p([]),h=p(!0),C=p(!0),D=p([]),I=p(!0),$=p(!0),N=p(0),V=p(["",""]),q=p(),R=p(),g=Q({visible:!1,title:""}),B={configId:void 0,configName:"",configKey:"",configValue:"",configType:"Y",remark:""},ee=Q({form:{...B},queryParams:{pageNum:1,pageSize:10,configName:"",configKey:"",configType:""},rules:{configName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],configKey:[{required:!0,message:"参数键名不能为空",trigger:"blur"}],configValue:[{required:!0,message:"参数键值不能为空",trigger:"blur"}]}}),{queryParams:r,form:s,rules:le}=M(ee),w=async()=>{h.value=!0;const i=await Ie(n==null?void 0:n.addDateRange(r.value,V.value));F.value=i.rows,N.value=i.total,h.value=!1},oe=()=>{S(),g.visible=!1},S=()=>{var i;s.value={...B},(i=R.value)==null||i.resetFields()},E=()=>{r.value.pageNum=1,w()},ae=()=>{var i;V.value=["",""],(i=q.value)==null||i.resetFields(),E()},te=i=>{D.value=i.map(e=>e.configId),I.value=i.length!=1,$.value=!i.length},ne=()=>{S(),g.visible=!0,g.title="添加参数"},P=async i=>{S();const e=(i==null?void 0:i.configId)||D.value[0],_=await $e(e);Object.assign(s.value,_.data),g.visible=!0,g.title="修改参数"},ie=()=>{var i;(i=R.value)==null||i.validate(async e=>{e&&(s.value.configId?await qe(s.value):await Be(s.value),n==null||n.$modal.msgSuccess("操作成功"),g.visible=!1,await w())})},Y=async i=>{const e=(i==null?void 0:i.configId)||D.value;await(n==null?void 0:n.$modal.confirm('是否确认删除参数编号为"'+e+'"的数据项？')),await Pe(e),await w(),n==null||n.$modal.msgSuccess("删除成功")},se=()=>{n==null||n.download("system/config/export",{...r.value},`config_${new Date().getTime()}.xlsx`)},re=async()=>{await Ye(),n==null||n.$modal.msgSuccess("刷新缓存成功")};return Ce(()=>{w()}),(i,e)=>{var L,H;const _=Te,m=Xe,ue=De,de=he,me=Ze,u=Ne,x=We,z=Oe,k=Ge,pe=je,ce=Qe,v=He,fe=Me,A=Ue,ge=Le,_e=Ae,ve=ze,ye=xe,be=Fe,b=Ee("hasPermi"),we=Ke;return d(),U("div",Je,[l(Re,{"enter-active-class":(L=t(n))==null?void 0:L.animate.searchAnimate.enter,"leave-active-class":(H=t(n))==null?void 0:H.animate.searchAnimate.leave},{default:a(()=>[c(K("div",el,[l(z,{shadow:"hover"},{default:a(()=>[l(x,{ref_key:"queryFormRef",ref:q,model:t(r),inline:!0},{default:a(()=>[l(m,{label:"参数名称",prop:"configName"},{default:a(()=>[l(_,{modelValue:t(r).configName,"onUpdate:modelValue":e[0]||(e[0]=o=>t(r).configName=o),placeholder:"请输入参数名称",clearable:"",onKeyup:j(E,["enter"])},null,8,["modelValue"])]),_:1}),l(m,{label:"参数键名",prop:"configKey"},{default:a(()=>[l(_,{modelValue:t(r).configKey,"onUpdate:modelValue":e[1]||(e[1]=o=>t(r).configKey=o),placeholder:"请输入参数键名",clearable:"",onKeyup:j(E,["enter"])},null,8,["modelValue"])]),_:1}),l(m,{label:"系统内置",prop:"configType"},{default:a(()=>[l(de,{modelValue:t(r).configType,"onUpdate:modelValue":e[2]||(e[2]=o=>t(r).configType=o),placeholder:"系统内置",clearable:""},{default:a(()=>[(d(!0),U(G,null,O(t(T),o=>(d(),y(ue,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"创建时间",style:{width:"308px"}},{default:a(()=>[l(me,{modelValue:t(V),"onUpdate:modelValue":e[3]||(e[3]=o=>W(V)?V.value=o:null),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),l(m,null,{default:a(()=>[l(u,{type:"primary",icon:"Search",onClick:E},{default:a(()=>e[15]||(e[15]=[f("搜索")])),_:1}),l(u,{icon:"Refresh",onClick:ae},{default:a(()=>e[16]||(e[16]=[f("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[X,t(C)]])]),_:1},8,["enter-active-class","leave-active-class"]),l(z,{shadow:"hover"},{header:a(()=>[l(ce,{gutter:10,class:"mb8"},{default:a(()=>[l(k,{span:1.5},{default:a(()=>[c((d(),y(u,{type:"primary",plain:"",icon:"Plus",onClick:ne},{default:a(()=>e[17]||(e[17]=[f("新增")])),_:1})),[[b,["system:config:add"]]])]),_:1}),l(k,{span:1.5},{default:a(()=>[c((d(),y(u,{type:"success",plain:"",icon:"Edit",disabled:t(I),onClick:e[4]||(e[4]=o=>P())},{default:a(()=>e[18]||(e[18]=[f(" 修改 ")])),_:1},8,["disabled"])),[[b,["system:config:edit"]]])]),_:1}),l(k,{span:1.5},{default:a(()=>[c((d(),y(u,{type:"danger",plain:"",icon:"Delete",disabled:t($),onClick:e[5]||(e[5]=o=>Y())},{default:a(()=>e[19]||(e[19]=[f(" 删除 ")])),_:1},8,["disabled"])),[[b,["system:config:remove"]]])]),_:1}),l(k,{span:1.5},{default:a(()=>[c((d(),y(u,{type:"warning",plain:"",icon:"Download",onClick:se},{default:a(()=>e[20]||(e[20]=[f("导出")])),_:1})),[[b,["system:config:export"]]])]),_:1}),l(k,{span:1.5},{default:a(()=>[c((d(),y(u,{type:"danger",plain:"",icon:"Refresh",onClick:re},{default:a(()=>e[21]||(e[21]=[f("刷新缓存")])),_:1})),[[b,["system:config:remove"]]])]),_:1}),l(pe,{"show-search":t(C),"onUpdate:showSearch":e[6]||(e[6]=o=>W(C)?C.value=o:null),onQueryTable:w},null,8,["show-search"])]),_:1})]),default:a(()=>[c((d(),y(ge,{border:"",data:t(F),onSelectionChange:te},{default:a(()=>[l(v,{type:"selection",width:"55",align:"center"}),Se("",!0),l(v,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),l(v,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),l(v,{label:"参数键值",align:"center",prop:"configValue","show-overflow-tooltip":!0}),l(v,{label:"系统内置",align:"center",prop:"configType"},{default:a(o=>[l(fe,{options:t(T),value:o.row.configType},null,8,["options","value"])]),_:1}),l(v,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),l(v,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(o=>[K("span",null,Z(t(n).parseTime(o.row.createTime)),1)]),_:1}),l(v,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:a(o=>[l(A,{content:"修改",placement:"top"},{default:a(()=>[c(l(u,{link:"",type:"primary",icon:"Edit",onClick:Ve=>P(o.row)},null,8,["onClick"]),[[b,["system:config:edit"]]])]),_:2},1024),l(A,{content:"删除",placement:"top"},{default:a(()=>[c(l(u,{link:"",type:"primary",icon:"Delete",onClick:Ve=>Y(o.row)},null,8,["onClick"]),[[b,["system:config:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[we,t(h)]]),c(l(_e,{page:t(r).pageNum,"onUpdate:page":e[7]||(e[7]=o=>t(r).pageNum=o),limit:t(r).pageSize,"onUpdate:limit":e[8]||(e[8]=o=>t(r).pageSize=o),total:t(N),onPagination:w},null,8,["page","limit","total"]),[[X,t(N)>0]])]),_:1}),l(be,{modelValue:t(g).visible,"onUpdate:modelValue":e[14]||(e[14]=o=>t(g).visible=o),title:t(g).title,width:"500px","append-to-body":""},{footer:a(()=>[K("div",ll,[l(u,{type:"primary",onClick:ie},{default:a(()=>e[22]||(e[22]=[f("确 定")])),_:1}),l(u,{onClick:oe},{default:a(()=>e[23]||(e[23]=[f("取 消")])),_:1})])]),default:a(()=>[l(x,{ref_key:"configFormRef",ref:R,model:t(s),rules:t(le),"label-width":"80px"},{default:a(()=>[l(m,{label:"参数名称",prop:"configName"},{default:a(()=>[l(_,{modelValue:t(s).configName,"onUpdate:modelValue":e[9]||(e[9]=o=>t(s).configName=o),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),l(m,{label:"参数键名",prop:"configKey"},{default:a(()=>[l(_,{modelValue:t(s).configKey,"onUpdate:modelValue":e[10]||(e[10]=o=>t(s).configKey=o),placeholder:"请输入参数键名"},null,8,["modelValue"])]),_:1}),l(m,{label:"参数键值",prop:"configValue"},{default:a(()=>[l(_,{modelValue:t(s).configValue,"onUpdate:modelValue":e[11]||(e[11]=o=>t(s).configValue=o),type:"textarea",placeholder:"请输入参数键值"},null,8,["modelValue"])]),_:1}),l(m,{label:"系统内置",prop:"configType"},{default:a(()=>[l(ye,{modelValue:t(s).configType,"onUpdate:modelValue":e[12]||(e[12]=o=>t(s).configType=o)},{default:a(()=>[(d(!0),U(G,null,O(t(T),o=>(d(),y(ve,{key:o.value,value:o.value},{default:a(()=>[f(Z(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"备注",prop:"remark"},{default:a(()=>[l(_,{modelValue:t(s).remark,"onUpdate:modelValue":e[13]||(e[13]=o=>t(s).remark=o),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{kl as default};
